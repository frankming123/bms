# SSH登录或数据传输时速度很慢，如何解决？<a name="bms_01_0055"></a>

## 问题描述<a name="section172952158115"></a>

在Linux实例中，通过外网使用SSH服务登录或数据传输时，速度很慢，这是因为SSH服务启用了UseDNS特性所致。

UseDNS特性是SSH服务的安全增强特性，默认为开启状态。开启后，服务端先根据客户端的IP地址进行DNS PTR反向查询，得到客户端的主机名。再根据得到的客户端主机名进行DNS正向A记录查询，最后比对得到的IP与原始IP是否一致，用以防止客户端欺骗。但是一般情况下，客户端使用的都是动态IP，没有相应的PTR记录。因此，该特性开启后，不仅无法用于信息比对，反而由于相关查询操作增加了操作延迟，导致客户端连接速度变慢。

## 解决方案<a name="section188381730131110"></a>

1.  使用控制台的“远程登录”功能登录裸金属服务器。
2.  执行以下命令，在vi编辑器中打开“/etc/ssh/sshd\_config”。

    **vi /etc/ssh/sshd\_config**

3.  找到以下字段：

    ```
    #UseDNS yes
    ```

    在其下方新建一行，填入：

    ```
    UseDNS no
    ```

4.  保存并重启SSH。

    **service sshd restart**


